{
  "node_id": "@n8n/n8n-nodes-langchain.mcpClient",
  "name": "@n8n/n8n-nodes-langchain.mcpClient",
  "version": 1,
  "semantic_context": "Standalone MCP Client",
  "parameters": {
    "serverTransport": {
      "displayName": "Server Transport",
      "name": "serverTransport",
      "type": "options",
      "options": [
        {
          "name": "HTTP Streamable",
          "value": "httpStreamable"
        },
        {
          "name": "Server Sent Events (Deprecated)",
          "value": "sse"
        }
      ],
      "default": "httpStreamable",
      "description": "The transport used by your endpoint",
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "endpointUrl": {
      "displayName": "MCP Endpoint URL",
      "name": "endpointUrl",
      "type": "string",
      "default": "",
      "placeholder": "e.g. https://my-mcp-server.ai/mcp",
      "required": true,
      "description": "The URL of the MCP server to connect to",
      "ai_hint": "必须包含协议头 (http:// 或 https://)。支持表达式注入。"
    },
    "authentication": {
      "displayName": "Authentication",
      "name": "authentication",
      "type": "options",
      "options": [
        {
          "name": "Bearer Auth",
          "value": "bearerAuth"
        },
        {
          "name": "Header Auth",
          "value": "headerAuth"
        },
        {
          "name": "MCP OAuth2",
          "value": "mcpOAuth2Api"
        },
        {
          "name": "Multiple Headers Auth",
          "value": "multipleHeadersAuth"
        },
        {
          "name": "None",
          "value": "none"
        }
      ],
      "default": "none",
      "description": "The way to authenticate with your endpoint",
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。 与鉴权相关，注意不要在公共日志中输出敏感信息。"
    },
    "credentials": {
      "displayName": "Credentials",
      "name": "credentials",
      "type": "credentials",
      "default": "",
      "displayOptions": {
        "show": {
          "authentication": [
            "headerAuth",
            "bearerAuth",
            "mcpOAuth2Api",
            "multipleHeadersAuth"
          ]
        }
      }
    },
    "tool": {
      "displayName": "Tool",
      "name": "tool",
      "type": "resourceLocator",
      "default": {
        "mode": "list",
        "value": ""
      },
      "required": true,
      "description": "The tool to use",
      "modes": [
        {
          "displayName": "From List",
          "name": "list",
          "type": "list",
          "typeOptions": {
            "searchListMethod": "getTools",
            "searchable": true,
            "skipCredentialsCheckInRLC": true
          }
        },
        {
          "displayName": "ID",
          "name": "id",
          "type": "string"
        }
      ],
      "ai_hint": "The tool to use"
    },
    "inputMode": {
      "displayName": "Input Mode",
      "name": "inputMode",
      "type": "options",
      "default": "manual",
      "noDataExpression": true,
      "options": [
        {
          "name": "Manual",
          "value": "manual",
          "description": "Manually specify the input data for each tool parameter"
        },
        {
          "name": "JSON",
          "value": "json",
          "description": "Specify the input data as a JSON object"
        }
      ],
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "parameters": {
      "displayName": "Parameters",
      "name": "parameters",
      "type": "resourceMapper",
      "default": {
        "mappingMode": "defineBelow",
        "value": null
      },
      "noDataExpression": true,
      "required": true,
      "typeOptions": {
        "loadOptionsDependsOn": [
          "tool.value"
        ],
        "resourceMapper": {
          "resourceMapperMethod": "getToolParameters",
          "hideNoDataError": true,
          "addAllFields": false,
          "supportAutoMap": false,
          "mode": "add",
          "fieldWords": {
            "singular": "parameter",
            "plural": "parameters"
          }
        }
      },
      "displayOptions": {
        "show": {
          "inputMode": [
            "manual"
          ]
        }
      }
    },
    "jsonInput": {
      "displayName": "JSON",
      "name": "jsonInput",
      "type": "json",
      "typeOptions": {
        "rows": 5
      },
      "default": "{\n  \"my_field_1\": \"value\",\n  \"my_field_2\": 1\n}\n",
      "validateType": "object",
      "displayOptions": {
        "show": {
          "inputMode": [
            "json"
          ]
        }
      }
    },
    "options": {
      "displayName": "Options",
      "name": "options",
      "placeholder": "Add Option",
      "description": "Additional options to add",
      "type": "collection",
      "default": {},
      "options": [
        {
          "displayName": "Convert to Binary",
          "name": "convertToBinary",
          "type": "boolean",
          "default": true,
          "description": "Whether to convert images and audio to binary data. If false, images and audio will be returned as base64 encoded strings."
        },
        {
          "displayName": "Timeout",
          "name": "timeout",
          "type": "number",
          "typeOptions": {
            "minValue": 1
          },
          "default": 60000,
          "description": "Time in ms to wait for tool calls to finish"
        }
      ],
      "ai_hint": "此参数为 fixedCollection，包含嵌套字段，不要扁平化。"
    }
  },
  "configuration_logic": {
    "required_sequence": [
      "serverTransport",
      "endpointUrl",
      "authentication",
      "credentials",
      "tool",
      "inputMode",
      "parameters",
      "jsonInput",
      "options"
    ],
    "conditional_rules": [
      "IF authentication IN [\"headerAuth\", \"bearerAuth\", \"mcpOAuth2Api\", \"multipleHeadersAuth\"] THEN SHOW parameter 'credentials'",
      "IF inputMode == 'manual' THEN SHOW parameter 'parameters'",
      "IF inputMode == 'json' THEN SHOW parameter 'jsonInput'"
    ]
  }
}