{
  "node_id": "n8n-nodes-base.tapfiliateTool",
  "name": "n8n-nodes-base.tapfiliateTool",
  "version": 1,
  "semantic_context": "Consume Tapfiliate API",
  "parameters": {
    "descriptionType": {
      "displayName": "Tool Description",
      "name": "descriptionType",
      "type": "options",
      "noDataExpression": true,
      "options": [
        {
          "name": "Set Automatically",
          "value": "auto",
          "description": "Automatically set based on resource and operation"
        },
        {
          "name": "Set Manually",
          "value": "manual",
          "description": "Manually set the description"
        }
      ],
      "default": "auto",
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "toolDescription": {
      "displayName": "Description",
      "name": "toolDescription",
      "type": "string",
      "default": "Consume Tapfiliate API",
      "required": true,
      "typeOptions": {
        "rows": 2
      },
      "description": "Explain to the LLM what this tool does, a good, specific description would allow LLMs to produce expected results much more often",
      "displayOptions": {
        "show": {
          "descriptionType": [
            "manual"
          ]
        }
      },
      "ai_hint": "Explain to the LLM what this tool does, a good, specific description would allow LLMs to produce expected results much more often"
    },
    "resource": {
      "displayName": "Resource",
      "name": "resource",
      "type": "options",
      "noDataExpression": true,
      "options": [
        {
          "name": "Affiliate",
          "value": "affiliate"
        },
        {
          "name": "Affiliate Metadata",
          "value": "affiliateMetadata"
        },
        {
          "name": "Program Affiliate",
          "value": "programAffiliate"
        }
      ],
      "default": "affiliate",
      "required": true,
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "operation": {
      "displayName": "Operation",
      "name": "operation",
      "type": "options",
      "noDataExpression": true,
      "displayOptions": {
        "show": {
          "resource": [
            "programAffiliate"
          ]
        }
      },
      "options": [
        {
          "name": "Add",
          "value": "add",
          "description": "Add affiliate to program",
          "action": "Add a program affiliate"
        },
        {
          "name": "Approve",
          "value": "approve",
          "description": "Approve an affiliate for a program",
          "action": "Approve a program affiliate"
        },
        {
          "name": "Disapprove",
          "value": "disapprove",
          "description": "Disapprove an affiliate",
          "action": "Disapprove a program affiliate"
        },
        {
          "name": "Get",
          "value": "get",
          "description": "Get an affiliate in a program",
          "action": "Get a program affiliate"
        },
        {
          "name": "Get Many",
          "value": "getAll",
          "description": "Get many affiliates in program",
          "action": "Get many program affiliates"
        }
      ],
      "default": "add",
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "email": {
      "displayName": "Email",
      "name": "email",
      "type": "string",
      "placeholder": "name@email.com",
      "required": true,
      "default": "",
      "displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "affiliate"
          ]
        }
      },
      "description": "The affiliate’s email",
      "ai_hint": "The affiliate’s email"
    },
    "firstname": {
      "displayName": "First Name",
      "name": "firstname",
      "type": "string",
      "required": true,
      "displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "affiliate"
          ]
        }
      },
      "default": "",
      "description": "The affiliate’s firstname",
      "ai_hint": "The affiliate’s firstname"
    },
    "lastname": {
      "displayName": "Last Name",
      "name": "lastname",
      "type": "string",
      "required": true,
      "displayOptions": {
        "show": {
          "operation": [
            "create"
          ],
          "resource": [
            "affiliate"
          ]
        }
      },
      "default": "",
      "description": "The affiliate’s lastname",
      "ai_hint": "The affiliate’s lastname"
    },
    "additionalFields": {
      "displayName": "Additional Fields",
      "name": "additionalFields",
      "type": "collection",
      "placeholder": "Add Field",
      "default": {},
      "displayOptions": {
        "show": {
          "resource": [
            "programAffiliate"
          ],
          "operation": [
            "add"
          ]
        }
      },
      "options": [
        {
          "displayName": "Approved",
          "name": "approved",
          "type": "boolean",
          "default": true,
          "description": "An optional approval status"
        },
        {
          "displayName": "Coupon",
          "name": "coupon",
          "type": "string",
          "default": "",
          "description": "An optional coupon for this affiliate"
        }
      ],
      "ai_hint": "此参数为 fixedCollection，包含嵌套字段，不要扁平化。"
    },
    "affiliateId": {
      "displayName": "Affiliate ID",
      "name": "affiliateId",
      "type": "string",
      "required": true,
      "default": "",
      "displayOptions": {
        "show": {
          "resource": [
            "programAffiliate"
          ],
          "operation": [
            "get"
          ]
        }
      },
      "description": "The ID of the affiliate",
      "ai_hint": "The ID of the affiliate"
    },
    "returnAll": {
      "displayName": "Return All",
      "name": "returnAll",
      "type": "boolean",
      "displayOptions": {
        "show": {
          "resource": [
            "programAffiliate"
          ],
          "operation": [
            "getAll"
          ]
        }
      },
      "default": false,
      "description": "Whether to return all results or only up to a given limit",
      "ai_hint": "布尔值：true 或 false。"
    },
    "limit": {
      "displayName": "Limit",
      "name": "limit",
      "type": "number",
      "displayOptions": {
        "show": {
          "resource": [
            "programAffiliate"
          ],
          "operation": [
            "getAll"
          ],
          "returnAll": [
            false
          ]
        }
      },
      "typeOptions": {
        "minValue": 1,
        "maxValue": 1000
      },
      "default": 100,
      "description": "Max number of results to return",
      "ai_hint": "Max number of results to return"
    },
    "filters": {
      "displayName": "Filters",
      "name": "filters",
      "type": "collection",
      "placeholder": "Add Field",
      "default": {},
      "displayOptions": {
        "show": {
          "resource": [
            "programAffiliate"
          ],
          "operation": [
            "getAll"
          ]
        }
      },
      "options": [
        {
          "displayName": "Affiliate Group ID",
          "name": "affiliate_group_id",
          "type": "string",
          "default": "",
          "description": "Retrieves affiliates for a certain affiliate group"
        },
        {
          "displayName": "Email",
          "name": "email",
          "type": "string",
          "placeholder": "name@email.com",
          "default": "",
          "description": "An email address"
        },
        {
          "displayName": "Parent ID",
          "name": "parentId",
          "type": "string",
          "default": "",
          "description": "Retrieves children for a certain parent affiliate"
        },
        {
          "displayName": "Source ID",
          "name": "source_id",
          "type": "string",
          "default": ""
        }
      ],
      "ai_hint": "此参数为 fixedCollection，包含嵌套字段，不要扁平化。"
    },
    "metadataUi": {
      "displayName": "Metadata",
      "name": "metadataUi",
      "placeholder": "Add Metadata",
      "type": "fixedCollection",
      "displayOptions": {
        "show": {
          "resource": [
            "affiliateMetadata"
          ],
          "operation": [
            "add"
          ]
        }
      },
      "default": {},
      "typeOptions": {
        "multipleValues": true
      },
      "description": "Meta data",
      "options": [
        {
          "name": "metadataValues",
          "displayName": "Metadata",
          "values": [
            {
              "displayName": "Key",
              "name": "key",
              "type": "string",
              "default": "",
              "description": "Name of the metadata key to add"
            },
            {
              "displayName": "Value",
              "name": "value",
              "type": "string",
              "default": "",
              "description": "Value to set for the metadata key"
            }
          ]
        }
      ],
      "ai_hint": "此参数为 fixedCollection，包含嵌套字段，不要扁平化。"
    },
    "key": {
      "displayName": "Key",
      "name": "key",
      "type": "string",
      "displayOptions": {
        "show": {
          "resource": [
            "affiliateMetadata"
          ],
          "operation": [
            "update"
          ]
        }
      },
      "default": "",
      "description": "Name of the metadata key to update",
      "ai_hint": "Name of the metadata key to update"
    },
    "value": {
      "displayName": "Value",
      "name": "value",
      "type": "string",
      "displayOptions": {
        "show": {
          "resource": [
            "affiliateMetadata"
          ],
          "operation": [
            "update"
          ]
        }
      },
      "default": "",
      "description": "Value to set for the metadata key",
      "ai_hint": "Value to set for the metadata key"
    },
    "programId": {
      "displayName": "Program Name or ID",
      "name": "programId",
      "type": "options",
      "typeOptions": {
        "loadOptionsMethod": "getPrograms"
      },
      "required": true,
      "default": "",
      "displayOptions": {
        "show": {
          "operation": [
            "getAll"
          ],
          "resource": [
            "programAffiliate"
          ]
        }
      },
      "description": "The ID of the Program to add the affiliate to. This ID can be found as part of the URL when viewing the program on the platform. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>.",
      "ai_hint": "The ID of the Program to add the affiliate to. This ID can be found as part of the URL when viewing the program on the platform. Choose from the list, or specify an ID using an <a href=\"https://docs.n8n.io/code/expressions/\">expression</a>."
    }
  },
  "configuration_logic": {
    "required_sequence": [
      "descriptionType",
      "toolDescription",
      "resource",
      "operation",
      "email",
      "firstname",
      "lastname",
      "additionalFields",
      "affiliateId",
      "affiliateId",
      "returnAll",
      "limit",
      "filters",
      "operation",
      "affiliateId",
      "metadataUi",
      "affiliateId",
      "key",
      "affiliateId",
      "key",
      "value",
      "operation",
      "programId",
      "affiliateId",
      "additionalFields",
      "programId",
      "affiliateId",
      "programId",
      "affiliateId",
      "programId",
      "affiliateId",
      "programId",
      "returnAll",
      "limit",
      "filters"
    ],
    "conditional_rules": [
      "IF descriptionType == 'manual' THEN SHOW parameter 'toolDescription'",
      "IF resource == 'affiliate' THEN SHOW parameter 'operation'",
      "IF operation == 'create' AND resource == 'affiliate' THEN SHOW parameter 'email'",
      "IF operation == 'create' AND resource == 'affiliate' THEN SHOW parameter 'firstname'",
      "IF operation == 'create' AND resource == 'affiliate' THEN SHOW parameter 'lastname'",
      "IF resource == 'affiliate' AND operation == 'create' THEN SHOW parameter 'additionalFields'",
      "IF resource == 'affiliate' AND operation == 'delete' THEN SHOW parameter 'affiliateId'",
      "IF resource == 'affiliate' AND operation == 'get' THEN SHOW parameter 'affiliateId'",
      "IF resource == 'affiliate' AND operation == 'getAll' THEN SHOW parameter 'returnAll'",
      "IF resource == 'affiliate' AND operation == 'getAll' AND returnAll == False THEN SHOW parameter 'limit'",
      "IF resource == 'affiliate' AND operation == 'getAll' THEN SHOW parameter 'filters'",
      "IF resource == 'affiliateMetadata' THEN SHOW parameter 'operation'",
      "IF resource == 'affiliateMetadata' AND operation == 'add' THEN SHOW parameter 'affiliateId'",
      "IF resource == 'affiliateMetadata' AND operation == 'add' THEN SHOW parameter 'metadataUi'",
      "IF resource == 'affiliateMetadata' AND operation == 'remove' THEN SHOW parameter 'affiliateId'",
      "IF resource == 'affiliateMetadata' AND operation == 'remove' THEN SHOW parameter 'key'",
      "IF resource == 'affiliateMetadata' AND operation == 'update' THEN SHOW parameter 'affiliateId'",
      "IF resource == 'affiliateMetadata' AND operation == 'update' THEN SHOW parameter 'key'",
      "IF resource == 'affiliateMetadata' AND operation == 'update' THEN SHOW parameter 'value'",
      "IF resource == 'programAffiliate' THEN SHOW parameter 'operation'",
      "IF operation == 'add' AND resource == 'programAffiliate' THEN SHOW parameter 'programId'",
      "IF resource == 'programAffiliate' AND operation == 'add' THEN SHOW parameter 'affiliateId'",
      "IF resource == 'programAffiliate' AND operation == 'add' THEN SHOW parameter 'additionalFields'",
      "IF operation == 'approve' AND resource == 'programAffiliate' THEN SHOW parameter 'programId'",
      "IF resource == 'programAffiliate' AND operation == 'approve' THEN SHOW parameter 'affiliateId'",
      "IF operation == 'disapprove' AND resource == 'programAffiliate' THEN SHOW parameter 'programId'",
      "IF resource == 'programAffiliate' AND operation == 'disapprove' THEN SHOW parameter 'affiliateId'",
      "IF operation == 'get' AND resource == 'programAffiliate' THEN SHOW parameter 'programId'",
      "IF resource == 'programAffiliate' AND operation == 'get' THEN SHOW parameter 'affiliateId'",
      "IF operation == 'getAll' AND resource == 'programAffiliate' THEN SHOW parameter 'programId'",
      "IF resource == 'programAffiliate' AND operation == 'getAll' THEN SHOW parameter 'returnAll'",
      "IF resource == 'programAffiliate' AND operation == 'getAll' AND returnAll == False THEN SHOW parameter 'limit'",
      "IF resource == 'programAffiliate' AND operation == 'getAll' THEN SHOW parameter 'filters'"
    ]
  }
}