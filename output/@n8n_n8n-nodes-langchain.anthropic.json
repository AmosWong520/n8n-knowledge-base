{
  "node_id": "@n8n/n8n-nodes-langchain.anthropic",
  "name": "@n8n/n8n-nodes-langchain.anthropic",
  "version": 1,
  "semantic_context": "Interact with Anthropic AI models",
  "parameters": {
    "resource": {
      "displayName": "Resource",
      "name": "resource",
      "type": "options",
      "noDataExpression": true,
      "options": [
        {
          "name": "Document",
          "value": "document"
        },
        {
          "name": "File",
          "value": "file"
        },
        {
          "name": "Image",
          "value": "image"
        },
        {
          "name": "Prompt",
          "value": "prompt"
        },
        {
          "name": "Text",
          "value": "text"
        },
        {
          "name": "Custom API Call",
          "value": "__CUSTOM_API_CALL__"
        }
      ],
      "default": "text",
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "operation": {
      "displayName": "Operation",
      "name": "operation",
      "type": "options",
      "noDataExpression": true,
      "options": [
        {
          "name": "Message a Model",
          "value": "message",
          "action": "Message a model",
          "description": "Create a completion with Anthropic model"
        },
        {
          "name": "Custom API Call",
          "value": "__CUSTOM_API_CALL__"
        }
      ],
      "default": "message",
      "displayOptions": {
        "show": {
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "modelId": {
      "displayName": "Model",
      "name": "modelId",
      "type": "resourceLocator",
      "default": {
        "mode": "list",
        "value": ""
      },
      "required": true,
      "modes": [
        {
          "displayName": "From List",
          "name": "list",
          "type": "list",
          "typeOptions": {
            "searchListMethod": "modelSearch",
            "searchable": true
          }
        },
        {
          "displayName": "ID",
          "name": "id",
          "type": "string",
          "placeholder": "e.g. claude-sonnet-4-5-20250929"
        }
      ],
      "displayOptions": {
        "show": {
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      }
    },
    "text": {
      "displayName": "Text Input",
      "name": "text",
      "type": "string",
      "placeholder": "e.g. What's in this image?",
      "default": "What's in this image?",
      "typeOptions": {
        "rows": 2
      },
      "displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ]
        }
      }
    },
    "inputType": {
      "displayName": "Input Type",
      "name": "inputType",
      "type": "options",
      "default": "url",
      "options": [
        {
          "name": "Image URL(s)",
          "value": "url"
        },
        {
          "name": "Binary File(s)",
          "value": "binary"
        }
      ],
      "displayOptions": {
        "show": {
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ]
        }
      },
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "documentUrls": {
      "displayName": "URL(s)",
      "name": "documentUrls",
      "type": "string",
      "placeholder": "e.g. https://example.com/document.pdf",
      "description": "URL(s) of the document(s) to analyze, multiple URLs can be added separated by comma",
      "default": "",
      "displayOptions": {
        "show": {
          "inputType": [
            "url"
          ],
          "operation": [
            "analyze"
          ],
          "resource": [
            "document"
          ]
        }
      },
      "ai_hint": "必须包含协议头 (http:// 或 https://)。支持表达式注入。"
    },
    "binaryPropertyName": {
      "displayName": "Attachment Input Data Field Name(s)",
      "name": "binaryPropertyName",
      "type": "string",
      "default": "data",
      "placeholder": "e.g. data",
      "description": "Name of the binary field(s) which contains the file(s) to attach, multiple field names can be added separated by comma",
      "displayOptions": {
        "show": {
          "addAttachments": [
            true
          ],
          "attachmentsInputType": [
            "binary"
          ],
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "Name of the binary field(s) which contains the file(s) to attach, multiple field names can be added separated by comma"
    },
    "simplify": {
      "displayName": "Simplify Output",
      "name": "simplify",
      "type": "boolean",
      "default": true,
      "description": "Whether to return a simplified version of the response instead of the raw data",
      "displayOptions": {
        "show": {
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "布尔值：true 或 false。"
    },
    "options": {
      "displayName": "Options",
      "name": "options",
      "placeholder": "Add Option",
      "type": "collection",
      "default": {},
      "options": [
        {
          "displayName": "Include Merged Response",
          "name": "includeMergedResponse",
          "type": "boolean",
          "default": false,
          "description": "Whether to include a single output string merging all text parts of the response"
        },
        {
          "displayName": "System Message",
          "name": "system",
          "type": "string",
          "default": "",
          "placeholder": "e.g. You are a helpful assistant"
        },
        {
          "displayName": "Code Execution",
          "name": "codeExecution",
          "type": "boolean",
          "default": false,
          "description": "Whether to enable code execution. Not supported by all models."
        },
        {
          "displayName": "Web Search",
          "name": "webSearch",
          "type": "boolean",
          "default": false,
          "description": "Whether to enable web search"
        },
        {
          "displayName": "Web Search Max Uses",
          "name": "maxUses",
          "type": "number",
          "default": 5,
          "description": "The maximum number of web search uses per request",
          "typeOptions": {
            "minValue": 0,
            "numberPrecision": 0
          }
        },
        {
          "displayName": "Web Search Allowed Domains",
          "name": "allowedDomains",
          "type": "string",
          "default": "",
          "description": "Comma-separated list of domains to search. Only domains in this list will be searched. Conflicts with \"Web Search Blocked Domains\".",
          "placeholder": "e.g. google.com, wikipedia.org"
        },
        {
          "displayName": "Web Search Blocked Domains",
          "name": "blockedDomains",
          "type": "string",
          "default": "",
          "description": "Comma-separated list of domains to block from search. Conflicts with \"Web Search Allowed Domains\".",
          "placeholder": "e.g. google.com, wikipedia.org"
        },
        {
          "displayName": "Maximum Number of Tokens",
          "name": "maxTokens",
          "default": 1024,
          "description": "The maximum number of tokens to generate in the completion",
          "type": "number",
          "typeOptions": {
            "minValue": 1,
            "numberPrecision": 0
          }
        },
        {
          "displayName": "Output Randomness (Temperature)",
          "name": "temperature",
          "default": 1,
          "description": "Controls the randomness of the output. Lowering results in less random completions. As the temperature approaches zero, the model will become deterministic and repetitive",
          "type": "number",
          "typeOptions": {
            "minValue": 0,
            "maxValue": 1,
            "numberPrecision": 1
          }
        },
        {
          "displayName": "Output Randomness (Top P)",
          "name": "topP",
          "default": 0.7,
          "description": "The maximum cumulative probability of tokens to consider when sampling",
          "type": "number",
          "typeOptions": {
            "minValue": 0,
            "maxValue": 1,
            "numberPrecision": 1
          }
        },
        {
          "displayName": "Output Randomness (Top K)",
          "name": "topK",
          "default": 5,
          "description": "The maximum number of tokens to consider when sampling",
          "type": "number",
          "typeOptions": {
            "minValue": 0,
            "numberPrecision": 0
          }
        },
        {
          "displayName": "Max Tool Calls Iterations",
          "name": "maxToolsIterations",
          "type": "number",
          "default": 15,
          "description": "The maximum number of tool iteration cycles the LLM will run before stopping. A single iteration can contain multiple tool calls. Set to 0 for no limit",
          "typeOptions": {
            "minValue": 0,
            "numberPrecision": 0
          }
        }
      ],
      "displayOptions": {
        "show": {
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "此参数为 fixedCollection，包含嵌套字段，不要扁平化。"
    },
    "fileId": {
      "displayName": "File ID",
      "name": "fileId",
      "type": "string",
      "placeholder": "e.g. file_123",
      "description": "ID of the file to get metadata for",
      "default": "",
      "displayOptions": {
        "show": {
          "operation": [
            "get"
          ],
          "resource": [
            "file"
          ]
        }
      },
      "ai_hint": "ID of the file to get metadata for"
    },
    "returnAll": {
      "displayName": "Return All",
      "name": "returnAll",
      "type": "boolean",
      "default": false,
      "description": "Whether to return all results or only up to a given limit",
      "displayOptions": {
        "show": {
          "operation": [
            "list"
          ],
          "resource": [
            "file"
          ]
        }
      },
      "ai_hint": "布尔值：true 或 false。"
    },
    "limit": {
      "displayName": "Limit",
      "name": "limit",
      "type": "number",
      "typeOptions": {
        "minValue": 1,
        "maxValue": 1000
      },
      "default": 50,
      "description": "Max number of results to return",
      "displayOptions": {
        "show": {
          "returnAll": [
            false
          ],
          "operation": [
            "list"
          ],
          "resource": [
            "file"
          ]
        }
      },
      "ai_hint": "Max number of results to return"
    },
    "fileUrl": {
      "displayName": "URL",
      "name": "fileUrl",
      "type": "string",
      "placeholder": "e.g. https://example.com/file.pdf",
      "description": "URL of the file to upload",
      "default": "",
      "displayOptions": {
        "show": {
          "inputType": [
            "url"
          ],
          "operation": [
            "upload"
          ],
          "resource": [
            "file"
          ]
        }
      },
      "ai_hint": "必须包含协议头 (http:// 或 https://)。支持表达式注入。"
    },
    "imageUrls": {
      "displayName": "URL(s)",
      "name": "imageUrls",
      "type": "string",
      "placeholder": "e.g. https://example.com/image.png",
      "description": "URL(s) of the image(s) to analyze, multiple URLs can be added separated by comma",
      "default": "",
      "displayOptions": {
        "show": {
          "inputType": [
            "url"
          ],
          "operation": [
            "analyze"
          ],
          "resource": [
            "image"
          ]
        }
      },
      "ai_hint": "必须包含协议头 (http:// 或 https://)。支持表达式注入。"
    },
    "experimentalNotice": {
      "displayName": "The <a href=\"https://docs.anthropic.com/en/api/prompt-tools-generate\">prompt tools APIs</a> are in a closed research preview. Your organization must request access to use them.",
      "name": "experimentalNotice",
      "type": "notice",
      "default": "",
      "displayOptions": {
        "show": {
          "resource": [
            "prompt"
          ]
        }
      }
    },
    "task": {
      "displayName": "Task",
      "name": "task",
      "type": "string",
      "description": "Description of the prompt's purpose",
      "placeholder": "e.g. A chef for a meal prep planning service",
      "default": "",
      "typeOptions": {
        "rows": 2
      },
      "displayOptions": {
        "show": {
          "operation": [
            "generate"
          ],
          "resource": [
            "prompt"
          ]
        }
      },
      "ai_hint": "Description of the prompt's purpose"
    },
    "messages": {
      "displayName": "Messages",
      "name": "messages",
      "type": "fixedCollection",
      "typeOptions": {
        "sortable": true,
        "multipleValues": true
      },
      "placeholder": "Add Message",
      "default": {
        "values": [
          {
            "content": "",
            "role": "user"
          }
        ]
      },
      "options": [
        {
          "displayName": "Values",
          "name": "values",
          "values": [
            {
              "displayName": "Prompt",
              "name": "content",
              "type": "string",
              "description": "The content of the message to be sent",
              "default": "",
              "placeholder": "e.g. Hello, how can you help me?",
              "typeOptions": {
                "rows": 2
              }
            },
            {
              "displayName": "Role",
              "name": "role",
              "type": "options",
              "description": "Role in shaping the model's response, it tells the model how it should behave and interact with the user",
              "options": [
                {
                  "name": "User",
                  "value": "user",
                  "description": "Send a message as a user and get a response from the model"
                },
                {
                  "name": "Assistant",
                  "value": "assistant",
                  "description": "Tell the model to adopt a specific tone or personality"
                }
              ],
              "default": "user"
            }
          ]
        }
      ],
      "displayOptions": {
        "show": {
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "此参数为 fixedCollection，包含嵌套字段，不要扁平化。"
    },
    "addAttachments": {
      "displayName": "Add Attachments",
      "name": "addAttachments",
      "type": "boolean",
      "default": false,
      "description": "Whether to add attachments to the message",
      "displayOptions": {
        "show": {
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "布尔值：true 或 false。"
    },
    "attachmentsInputType": {
      "displayName": "Attachments Input Type",
      "name": "attachmentsInputType",
      "type": "options",
      "default": "url",
      "description": "The type of input to use for the attachments",
      "options": [
        {
          "name": "URL(s)",
          "value": "url"
        },
        {
          "name": "Binary File(s)",
          "value": "binary"
        }
      ],
      "displayOptions": {
        "show": {
          "addAttachments": [
            true
          ],
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "根据 REST 规范选择方法: 查询用 GET，创建用 POST，更新用 PUT/PATCH。"
    },
    "attachmentsUrls": {
      "displayName": "Attachment URL(s)",
      "name": "attachmentsUrls",
      "type": "string",
      "default": "",
      "placeholder": "e.g. https://example.com/image.png",
      "description": "URL(s) of the file(s) to attach, multiple URLs can be added separated by comma",
      "displayOptions": {
        "show": {
          "addAttachments": [
            true
          ],
          "attachmentsInputType": [
            "url"
          ],
          "operation": [
            "message"
          ],
          "resource": [
            "text"
          ]
        }
      },
      "ai_hint": "必须包含协议头 (http:// 或 https://)。支持表达式注入。"
    }
  },
  "configuration_logic": {
    "required_sequence": [
      "resource",
      "operation",
      "modelId",
      "text",
      "inputType",
      "documentUrls",
      "binaryPropertyName",
      "simplify",
      "options",
      "operation",
      "fileId",
      "fileId",
      "returnAll",
      "limit",
      "inputType",
      "fileUrl",
      "binaryPropertyName",
      "options",
      "operation",
      "modelId",
      "text",
      "inputType",
      "imageUrls",
      "binaryPropertyName",
      "simplify",
      "options",
      "operation",
      "experimentalNotice",
      "task",
      "simplify",
      "messages",
      "simplify",
      "options",
      "messages",
      "simplify",
      "options",
      "operation",
      "modelId",
      "messages",
      "addAttachments",
      "attachmentsInputType",
      "attachmentsUrls",
      "binaryPropertyName",
      "simplify",
      "options"
    ],
    "conditional_rules": [
      "IF resource == 'document' THEN SHOW parameter 'operation'",
      "IF operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'modelId'",
      "IF operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'text'",
      "IF operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'inputType'",
      "IF inputType == 'url' AND operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'documentUrls'",
      "IF inputType == 'binary' AND operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'binaryPropertyName'",
      "IF operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'simplify'",
      "IF operation == 'analyze' AND resource == 'document' THEN SHOW parameter 'options'",
      "IF resource == 'file' THEN SHOW parameter 'operation'",
      "IF operation == 'deleteFile' AND resource == 'file' THEN SHOW parameter 'fileId'",
      "IF operation == 'get' AND resource == 'file' THEN SHOW parameter 'fileId'",
      "IF operation == 'list' AND resource == 'file' THEN SHOW parameter 'returnAll'",
      "IF returnAll == False AND operation == 'list' AND resource == 'file' THEN SHOW parameter 'limit'",
      "IF operation == 'upload' AND resource == 'file' THEN SHOW parameter 'inputType'",
      "IF inputType == 'url' AND operation == 'upload' AND resource == 'file' THEN SHOW parameter 'fileUrl'",
      "IF inputType == 'binary' AND operation == 'upload' AND resource == 'file' THEN SHOW parameter 'binaryPropertyName'",
      "IF operation == 'upload' AND resource == 'file' THEN SHOW parameter 'options'",
      "IF resource == 'image' THEN SHOW parameter 'operation'",
      "IF operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'modelId'",
      "IF operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'text'",
      "IF operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'inputType'",
      "IF inputType == 'url' AND operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'imageUrls'",
      "IF inputType == 'binary' AND operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'binaryPropertyName'",
      "IF operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'simplify'",
      "IF operation == 'analyze' AND resource == 'image' THEN SHOW parameter 'options'",
      "IF resource == 'prompt' THEN SHOW parameter 'operation'",
      "IF resource == 'prompt' THEN SHOW parameter 'experimentalNotice'",
      "IF operation == 'generate' AND resource == 'prompt' THEN SHOW parameter 'task'",
      "IF operation == 'generate' AND resource == 'prompt' THEN SHOW parameter 'simplify'",
      "IF operation == 'improve' AND resource == 'prompt' THEN SHOW parameter 'messages'",
      "IF operation == 'improve' AND resource == 'prompt' THEN SHOW parameter 'simplify'",
      "IF operation == 'improve' AND resource == 'prompt' THEN SHOW parameter 'options'",
      "IF operation == 'templatize' AND resource == 'prompt' THEN SHOW parameter 'messages'",
      "IF operation == 'templatize' AND resource == 'prompt' THEN SHOW parameter 'simplify'",
      "IF operation == 'templatize' AND resource == 'prompt' THEN SHOW parameter 'options'",
      "IF resource == 'text' THEN SHOW parameter 'operation'",
      "IF operation == 'message' AND resource == 'text' THEN SHOW parameter 'modelId'",
      "IF operation == 'message' AND resource == 'text' THEN SHOW parameter 'messages'",
      "IF operation == 'message' AND resource == 'text' THEN SHOW parameter 'addAttachments'",
      "IF addAttachments == True AND operation == 'message' AND resource == 'text' THEN SHOW parameter 'attachmentsInputType'",
      "IF addAttachments == True AND attachmentsInputType == 'url' AND operation == 'message' AND resource == 'text' THEN SHOW parameter 'attachmentsUrls'",
      "IF addAttachments == True AND attachmentsInputType == 'binary' AND operation == 'message' AND resource == 'text' THEN SHOW parameter 'binaryPropertyName'",
      "IF operation == 'message' AND resource == 'text' THEN SHOW parameter 'simplify'",
      "IF operation == 'message' AND resource == 'text' THEN SHOW parameter 'options'"
    ]
  }
}